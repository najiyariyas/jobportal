{% extends 'pageindex/base.html' %}
{% block content %}

<div class="container mt-5">
    <h2>Admin Dashboard</h2>

    <div class="row my-4">
        <div class="col-md-3">
            <div class="card p-3 bg-light">
                <h5>Total Testimonials</h5>
                <p>{{ total_testimonials }}</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-3 bg-light">
                <h5>Pending Testimonials</h5>
                <p>{{ pending_testimonials }}</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-3 bg-light">
                <h5>Approved Testimonials</h5>
                <p>{{ approved_testimonials }}</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-3 bg-light">
                <h5>Total Users</h5>
                <p>{{ total_users }}</p>
            </div>
        </div>
    </div>

    <h4>Pending Testimonials</h4>
    {% if pending %}
        <ul class="list-group">
            {% for testimonial in pending %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>{{ testimonial.name }}</strong> ({{ testimonial.job_title }})
                        <p>{{ testimonial.message|truncatewords:20 }}</p>
                    </div>
                    <div>
                        <a href="{% url 'approve_testimonial' testimonial.id %}" class="btn btn-success btn-sm">Approve</a>
                        <a href="{% url 'delete_testimonial' testimonial.id %}" class="btn btn-danger btn-sm">Delete</a>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No pending testimonials.</p>
    {% endif %}
</div>

{% endblock %}
